<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Get Started with R</title>
    <meta charset="utf-8" />
    <meta name="author" content="David Zimmermann" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/metropolis.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/metropolis-fonts.css" rel="stylesheet" />
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Get Started with R
## Data Visualisation with <code>ggplot2</code>
<html>
<div style="float:left">

</div>
<hr color='#EB811B' size=1px width=796px>
</html>
### David Zimmermann
### 2019-10-11 - <a href="https://www.meetup.com/KoelnRUG/">R User Group Cologne Meetup</a>

---




# Outline

.large[
- How can we represent data, organised?
- What is `ggplot2`?
- What parts does a plot have?
- How can we create a "publication-ready" chart?
]

---
class: inverse, center, middle

# Pipes &amp; Data Representation

---

# Piping Operator

The pipe operator `%&gt;%` takes the left-hand side (LHS) and "pipes" it as the first argument into the right-hand side (RHS)

--

.pull-left[
This ...

```r
f(x)
```
]
.pull-right[
becomes ...

```r
x %&gt;% f()
```
]
--
&lt;div&gt;
.pull-left[

```r
f(g(x))
```
]
.pull-right[

```r
x %&gt;% g() %&gt;% f()
```
]

Read: take `x` **then** apply function `g()` **then** apply function `f()`

&lt;/div&gt;
--
&lt;div&gt;
.pull-left[

```r
filter(data, variable &gt; 10)
```
]
.pull-right[

```r
data %&gt;% filter(variable &gt; 10)
```
]
&lt;/div&gt;
--
&lt;div&gt;
.pull-left[

```r
filtered_data &lt;- filter(data, variable &gt; 10)
arrange(grouped_data, variable)
```
]
.pull-right[

```r
data %&gt;% 
  filter(variable &gt; 10) %&gt;% 
  arrange(variable)
```
]
&lt;/div&gt;

See also: https://r4ds.had.co.nz/pipes.html

---
# Data Orientation



.pull-left[
&lt;h3&gt;&lt;center&gt;Wide&lt;/center&gt;&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; Year &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; DE &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; FR &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; UK &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 105 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 100 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 90 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 110 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 97 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 95 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[
&lt;h3&gt;&lt;center&gt;Long&lt;/center&gt;&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; Year &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; Country &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; POP &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; DE &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 105 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; DE &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 110 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; FR &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 100 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; FR &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 97 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; UK &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 90 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; UK &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; 95 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
---
# Data Orientation

.pull-left[
&lt;h3&gt;&lt;center&gt;Wide&lt;/center&gt;&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; Year &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; DE &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; FR &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; UK &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 105 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 100 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 90 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 110 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 97 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 95 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
.pull-right[
&lt;h3&gt;&lt;center&gt;Long&lt;/center&gt;&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; Year &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; Country &lt;/th&gt;
   &lt;th style=" font-weight: bold;    color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #377EB8 !important;width: 15px;text-align:center;"&gt; POP &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; DE &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 105 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; DE &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 110 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; FR &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 100 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; FR &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 97 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2010 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; UK &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 90 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #E41A1C !important;width: 15px;text-align:center;"&gt; 2011 &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #4DAF4A !important;width: 15px;text-align:center;"&gt; UK &lt;/td&gt;
   &lt;td style="     color: #000000 !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: #984EA3 !important;width: 15px;text-align:center;"&gt; 95 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
---
# Tidy Data

&gt; Tidy datasets are all alike, but every messy dataset is messy in its own way.

.src[.large[Hadley Wickham]]

In tidy data we have:

- One variable per column
- One observation per row
- One value per cell

--

.center[&lt;img src="figures/tidy_data.png" width="900px" /&gt;]
.src[[R4DS Tidy Data](https://r4ds.had.co.nz/tidy-data.html)]

---
# Data Transformation in the Tidyverse
.pull-left[

```r
wide &lt;- tibble(
  year = c(2002, 2007),
  Germany = c(78.7, 79.4),
  France = c(79.6, 80.7)
)
```
]
.pull-right[

```
## # A tibble: 2 x 3
##    year Germany France
##   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1  2002    78.7   79.6
## 2  2007    79.4   80.7
```
]
--
&lt;div&gt;
.pull-left[
**Wide to Long**: `tidyr::pivot_longer()`

```r
(long &lt;- wide %&gt;% 
   pivot_longer(-year,
                names_to = "country",
                values_to = "lifeExp"))
```

```
## # A tibble: 4 x 3
##    year country lifeExp
##   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
## 1  2002 Germany    78.7
## 2  2002 France     79.6
## 3  2007 Germany    79.4
## 4  2007 France     80.7
```
]
.pull-right[
**Long to Wide**: `tidyr::pivot_wider()`

```r
(wide2 &lt;- long %&gt;% 
   pivot_wider(names_from = country, 
               values_from = lifeExp))
```

```
## # A tibble: 2 x 3
##    year Germany France
##   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1  2002    78.7   79.6
## 2  2007    79.4   80.7
```
]
&lt;/div&gt;

---
# Pivot Functions

.center[![](figures/tidyr-longer-wider.gif)]
.src[[tidyexplain (batpigandme fork)](https://github.com/batpigandme/tidyexplain/blob/pivot/images/tidyr-longer-wider.gif)]
---

# Libraries and Dataset

Main **Packages** for today

```r
library(tidyverse) # includes ggplot2, dplyr, ...
library(gapminder) # for the dataset
```

--

**Data** for today
.pull-left[

```r
gapminder
```

```
## # A tibble: 1,704 x 6
##   country continent  year lifeExp    pop gdpPercap
##   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt;     &lt;dbl&gt;
## 1 Afghan… Asia       1952    28.8 8.43e6      779.
## 2 Afghan… Asia       1957    30.3 9.24e6      821.
## 3 Afghan… Asia       1962    32.0 1.03e7      853.
## 4 Afghan… Asia       1967    34.0 1.15e7      836.
## 5 Afghan… Asia       1972    36.1 1.31e7      740.
## 6 Afghan… Asia       1977    38.4 1.49e7      786.
## # … with 1,698 more rows
```
]
.pull-right[

```r
glimpse(gapminder)
```

```
## Observations: 1,704
## Variables: 6
## $ country   &lt;fct&gt; Afghanistan, Afghanistan, Afg…
## $ continent &lt;fct&gt; Asia, Asia, Asia, Asia, Asia,…
## $ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972,…
## $ lifeExp   &lt;dbl&gt; 28.801, 30.332, 31.997, 34.02…
## $ pop       &lt;int&gt; 8425333, 9240934, 10267083, 1…
## $ gdpPercap &lt;dbl&gt; 779.4453, 820.8530, 853.1007,…
```
]
---
class: inverse, center, middle

# ggplot2

---

# ggplot2

&gt; You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.

.src[[ggplot2 documentation](https://ggplot2.tidyverse.org/)]
--

**`ggplot2`**

.pull-left[
- opiniated R-package/ecosystem allowing for a high level of abstraction
- follows the **grammer of graphics** by Leland Wilkinson (hence the `gg`)
- allows for very fast prototyping but is still highly customizable
- can do everything `base::plot()` and `lattice` can do
- provides a highly consistent API
]
.pull-right[
.center[&lt;img src="figures/gg_parts.png" width="500px" /&gt;]
]
.src[[Hadley 2010](https://byrneslab.net/classes/biol607/readings/wickham_layered-grammar.pdf)]

---

# Elements of a ggplot

.large[
- **Data** to be visualised
- **.hlb[Aes]thetic** mappings from data to plot
- **.hlb[Geom]etric** objects to be displayed
- **.hlb[Stat]istic** transformations of the data
- **.hlb[Coord]inates** organize representation of data 
- **.hlb[Scale]s** define and change aesthetics 
- **.hlb[Facet]s** create subplots
- **.hlb[Theme] / guide** fine-tune the plot
]

---
# Building a ggplot2

.left-column[
- **&lt;mark&gt;Data&lt;/mark&gt;**
]
.right-column[

```r
ggplot(gapminder)
```

What data do we want to plot?

Data needs to be in the long/tidy format:

- One variable per column
- One observation per row
- One value per cell
]
.plot[
![](index_files/figure-html/plot_data_plot-1.png)&lt;!-- --&gt;
]
---
# Mapping Variables
.left-column[
- Data
- **&lt;mark&gt;.hlb[Aes]thetics&lt;/mark&gt;**
]
.right-column[

```r
ggplot(gapminder, `aes(x = year, y = lifeExp)`)
```


How do the variables of the data map to the plot? 

- `year` -&gt; **x**
- `lifeExp` -&gt; **y**

.small[
Additional aesthetics (depending on geometric) include (see also [specs](https://ggplot2.tidyverse.org/articles/ggplot2-specs.html)):

- color, fill, size, shape, alpha, linetype, stroke, group
]]
.plot[
![](index_files/figure-html/plot_x_plot-1.png)&lt;!-- --&gt;
]
---
# Adding Geometrics
.left-column[
- Data
- .hlb[Aes]thetics
- **&lt;mark&gt;.hlb[Geom]etrics&lt;/mark&gt;**
]
.right-column[

```r
ggplot(gapminder, aes(x = year, y = lifeExp)) + 
* geom_point()
```

How is the data visually presented by geometric objects?
]
.plot[
![](index_files/figure-html/plot_geom_point_plot-1.png)&lt;!-- --&gt;
]
---
# Adding Geometrics
.left-column[
- Data
- .hlb[Aes]thetics
- **&lt;mark&gt;.hlb[Geom]etrics&lt;/mark&gt;**
]
.right-column[

```r
ggplot(gapminder, aes(x = year, y = lifeExp, `group = year`)) + 
* geom_boxplot()
```

Using different geometrics:

&lt;img src="figures/plot_geom.png" width="300px" /&gt;

Full list of geometrics:
[ggplot2 documentation](https://ggplot2.tidyverse.org/reference/)
]
.plot[
![](index_files/figure-html/plot_geom_boxplot_plot-1.png)&lt;!-- --&gt;
]
---
# Geometrics
.left-column[
- Data
- .hlb[Aes]thetics
- **&lt;mark&gt;.hlb[Geom]etrics&lt;/mark&gt;**
]
.right-column[
.pull-left[
`geom_text()`, similar to `geom_label()`
.small[

```r
# choose only a subste of the data
gapminder %&gt;%
  filter(year == 2007, 
         country %in% c("Germany", "France")) %&gt;%
  # the actual plot
  ggplot(aes(`x = lifeExp, y = gdpPercap,` 
             `label = country`)) +
  geom_point(color = "red") +
* geom_text()
```
]

![](index_files/figure-html/geom_text-1.png)&lt;!-- --&gt;

]
.pull-right[
`geom_density()`, similar to `geom_histogram()` and `geom_violin()`
.small[

```r
# choose only a subset of the data
gapminder %&gt;% 
  filter(year == 2007) %&gt;% 
  # the actual plot
  ggplot(aes(`x = gdpPercap`, fill = continent)) +
* geom_density(alpha = 0.5)
```
![](index_files/figure-html/geom_density-1.png)&lt;!-- --&gt;
]]]

---
# Geometrics
.left-column[
- Data
- .hlb[Aes]thetics
- **&lt;mark&gt;.hlb[Geom]etrics&lt;/mark&gt;**
]


```r
lsf.str("package:ggplot2") %&gt;% grep("^geom_", ., value = TRUE)
```

```
##  [1] "geom_abline"     "geom_area"       "geom_bar"       
##  [4] "geom_bin2d"      "geom_blank"      "geom_boxplot"   
##  [7] "geom_col"        "geom_contour"    "geom_count"     
## [10] "geom_crossbar"   "geom_curve"      "geom_density"   
## [13] "geom_density_2d" "geom_density2d"  "geom_dotplot"   
## [16] "geom_errorbar"   "geom_errorbarh"  "geom_freqpoly"  
## [19] "geom_hex"        "geom_histogram"  "geom_hline"     
## [22] "geom_jitter"     "geom_label"      "geom_line"      
## [25] "geom_linerange"  "geom_map"        "geom_path"      
## [28] "geom_point"      "geom_pointrange" "geom_polygon"   
## [31] "geom_qq"         "geom_qq_line"    "geom_quantile"  
## [34] "geom_raster"     "geom_rect"       "geom_ribbon"    
## [37] "geom_rug"        "geom_segment"    "geom_sf"        
## [40] "geom_sf_label"   "geom_sf_text"    "geom_smooth"    
## [43] "geom_spoke"      "geom_step"       "geom_text"      
## [46] "geom_tile"       "geom_violin"     "geom_vline"
```

---
# Recap Aesthetics and Geometrics


.left-column[
**Data**

`data`
.small[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; carat &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; price &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; cut &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; table &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.73 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2397 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3300 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 713 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 55 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

**.hlb[Aes]thetic Mappings**
`$$\emptyset$$`

**.hlb[Geom]etric**
`$$\emptyset$$`

]

.right-column[

```r
*ggplot(data)
```

![](index_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;
]

---

# Recap Aesthetics and Geometrics
.left-column[
**Data**

`data`
.small[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; carat &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; price &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; cut &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; table &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.73 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2397 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3300 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 713 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 55 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

**.hlb[Aes]thetic Mappings**
- `carat` -&gt; **x**

**.hlb[Geom]etric**
`$$\emptyset$$`

]

.right-column[

```r
ggplot(data, `aes(x = carat)`)
```
![](index_files/figure-html/unnamed-chunk-27-1.png)&lt;!-- --&gt;
]

---

# Recap Aesthetics and Geometrics
.left-column[
**Data**

`data`
.small[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; carat &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; price &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; cut &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; table &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.73 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2397 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3300 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 713 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 55 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

**.hlb[Aes]thetic Mappings**
- `carat` -&gt; **x**
- `price` -&gt; **y**

**.hlb[Geom]etric**
`$$\emptyset$$`

]

.right-column[

```r
ggplot(data, aes(x = carat, `y = price`))
```
![](index_files/figure-html/unnamed-chunk-30-1.png)&lt;!-- --&gt;
]

---

# Recap Aesthetics and Geometrics
.left-column[
**Data**

`data`
.small[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; carat &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; price &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; cut &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; table &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.73 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2397 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3300 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 713 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 55 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

**.hlb[Aes]thetic Mappings**
- `carat` -&gt; **x**
- `price` -&gt; **y**

**.hlb[Geom]etric**

`geom_point()`
]

.right-column[

```r
ggplot(data, aes(x = carat, y = price)) +
* geom_point()
```
![](index_files/figure-html/unnamed-chunk-33-1.png)&lt;!-- --&gt;
]

---

# Recap Aesthetics and Geometrics
.left-column[
**Data**

`data`
.small[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; carat &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; price &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; cut &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; table &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.73 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2397 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3300 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0.31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 713 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ideal &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 55 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

**.hlb[Aes]thetic Mappings**
- `carat` -&gt; **x**
- `price` -&gt; **y**
- `cut` -&gt; **color**

**.hlb[Geom]etric**

`geom_point()`
]

.right-column[

```r
ggplot(data, aes(x = carat, y = price, `color = cut`)) +
  geom_point()
```
![](index_files/figure-html/unnamed-chunk-36-1.png)&lt;!-- --&gt;
]

---

# Interlude: Assigning, Adding and Saving

A `ggplot` object behaves like any `R` object and can bve assigned:

```r
myplot &lt;- ggplot(data, aes(x = carat, y = price, size = price)) + 
  geom_point()
```

--
.pull-left[
Adding to a plot can be done using the `+` operator like in all `ggplot`-calls:

```r
myplot + 
  labs(title = "Diamond Prices")
```

![](index_files/figure-html/adds-1.png)&lt;!-- --&gt;
]
--
.pull-right[
Saving a plot can be done using:

```r
ggsave("myplot.pdf", myplot, width = 7, height = 5)
ggsave("myplot.png", myplot, width = 7, height = 5, 
       dpi = 300)
```
]

---
# Statistical Transformations
.left-column[
- Data
- .hlb[Aes]thetics
- .hlb[Geom]etrics
- **&lt;mark&gt;.hlb[Stat]istics&lt;/mark&gt;**
]
.right-column[
.pull-left[

Some geometrics apply data transformations (internal `stat` functions) such as `geom_histogram()` or `geom_bar()`.


```r
ggplot(gapminder, aes(x = continent)) +
  geom_bar()
```

![](index_files/figure-html/hist_data-1.png)&lt;!-- --&gt;
]
.pull-right[
To disable the statistical calculations, we can use `stat = "identity"` or use `geom_col()`.

```r
gapminder %&gt;% 
  count(continent) %&gt;% 
  ggplot(aes(x = continent, y = n)) +
  geom_bar(`stat = "identity"`)
```
![](index_files/figure-html/geom_bar-1.png)&lt;!-- --&gt;
]
]

---
# Coordinates
.left-column[
- Data
- .hlb[Aes]thetics
- .hlb[Geom]etrics
- .hlb[Stat]istics
- **&lt;mark&gt;.hlb[Coord]inates&lt;/mark&gt;**
]
.right-column[
Create a base plot

```r
base_plot &lt;- ggplot(gapminder %&gt;% filter(year == 2007),
                 aes(x = lifeExp, y = gdpPercap, color = continent)) +
  geom_point()
```

Manipulate the coordinate system, see also `coord_map()` and `coord_polar()`

.pull-left[

```r
base_plot +
* coord_flip()
```

![](index_files/figure-html/coord_flip-1.png)&lt;!-- --&gt;
]
.pull-right[

```r
base_plot +
* coord_fixed(ratio = 1/1000)
```

![](index_files/figure-html/coord_fixed-1.png)&lt;!-- --&gt;
]
]

---
# Scales
.left-column[
- Data
- .hlb[Aes]thetics
- .hlb[Geom]etrics
- .hlb[Stat]istics
- .hlb[Coord]inates
- **&lt;mark&gt;.hlb[Scale]s&lt;/mark&gt;**
]
.right-column[
Manipulate Axis
.pull-left[

```r
base_plot +
* scale_y_log10(name = "Log 10 GDPpC")
```

![](index_files/figure-html/scale_10-1.png)&lt;!-- --&gt;
]
.pull-right[

```r
base_plot +
* scale_x_reverse()
```

![](index_files/figure-html/scale_rev-1.png)&lt;!-- --&gt;
]

Use `labs(x = "X-Axis Name", y = "Y-Axis Name", title = "Plot Title", ...)` to set multiple labels.
]

---
# Scales
.left-column[
- Data
- .hlb[Aes]thetics
- .hlb[Geom]etrics
- .hlb[Stat]istics
- .hlb[Coord]inates
- **&lt;mark&gt;.hlb[Scale]s&lt;/mark&gt;**
]
.right-column[
Format Axis using the `scales` library

```r
library(scales)
```

.pull-left[

```r
base_plot +
  scale_y_continuous(`labels = dollar`)
```
![](index_files/figure-html/scale_dollar-1.png)&lt;!-- --&gt;
]
.pull-right[

```r
base_plot +
  scale_y_continuous(`labels = comma`)
```
![](index_files/figure-html/scale_comma-1.png)&lt;!-- --&gt;
]
]

---
# Interlude Colors

Colors and fill-colors can be mapped using aesthetics or directly assigned
.pull-left[

```r
ggplot(gapminder, aes(x = lifeExp, y = gdpPercap,
                      `color = continent`)) +
  geom_point()
```
![](index_files/figure-html/color1a-1.png)&lt;!-- --&gt;

]

.pull-right[

```r
ggplot(gapminder, aes(x = lifeExp, y = gdpPercap)) +
  geom_point(`color = "red"`)
```
![](index_files/figure-html/color2a-1.png)&lt;!-- --&gt;
]

---
# Interlude Colors

Difference between `color` and `fill` aesthetic mappings:

.pull-left[

```r
ggplot(gapminder, aes(x = continent, 
                      `color` = continent)) +
  geom_bar()
```
![](index_files/figure-html/colorbara-1.png)&lt;!-- --&gt;
]
--
.pull-right[

```r
ggplot(gapminder, aes(x = continent, 
                      `fill` = continent)) +
  geom_bar()
```
![](index_files/figure-html/colorfillbara-1.png)&lt;!-- --&gt;
]

--

Use `fill` for geometrics that have an area (`geom_` `bar`, `col`, `polygon`, `ribbon`, ...).

Use `color` for geometrics that are 1-dimensional (`geom_` `line`, `point`, `path`, ...).
---

# Scales
.left-column[
- Data
- .hlb[Aes]thetics
- .hlb[Geom]etrics
- .hlb[Stat]istics
- .hlb[Coord]inates
- **&lt;mark&gt;.hlb[Scale]s&lt;/mark&gt;**
]
.right-column[
Scales are also used for manipulating colors

.pull-left[
See also: http://colorbrewer2.org

```r
base_plot +
* scale_color_brewer(palette = "Set1")
```

![](index_files/figure-html/colors_brewer-1.png)&lt;!-- --&gt;
]
.pull-right[
.small[

```r
colors &lt;- c("Africa" = "red", "Americas" = "lightgreen", 
            "Europe" = "#dd1c77", "Asia" = "#feb24c", 
            "Oceania" = "#2b8cbe")

base_plot +
* scale_color_manual(values = colors, name = "Kontinente")
```

![](index_files/figure-html/colors_manual-1.png)&lt;!-- --&gt;
]
]

Use `guide(color = FALSE)` to turn of the legend for a mapping.

]

---
# All Scales
.small[

```r
lsf.str("package:ggplot2") %&gt;% grep("^scale_", ., value = TRUE)
```

```
##  [1] "scale_alpha"               "scale_alpha_continuous"    "scale_alpha_date"          "scale_alpha_datetime"      "scale_alpha_discrete"     
##  [6] "scale_alpha_identity"      "scale_alpha_manual"        "scale_alpha_ordinal"       "scale_color_brewer"        "scale_color_continuous"   
## [11] "scale_color_discrete"      "scale_color_distiller"     "scale_color_gradient"      "scale_color_gradient2"     "scale_color_gradientn"    
## [16] "scale_color_grey"          "scale_color_hue"           "scale_color_identity"      "scale_color_manual"        "scale_color_viridis_c"    
## [21] "scale_color_viridis_d"     "scale_colour_brewer"       "scale_colour_continuous"   "scale_colour_date"         "scale_colour_datetime"    
## [26] "scale_colour_discrete"     "scale_colour_distiller"    "scale_colour_gradient"     "scale_colour_gradient2"    "scale_colour_gradientn"   
## [31] "scale_colour_grey"         "scale_colour_hue"          "scale_colour_identity"     "scale_colour_manual"       "scale_colour_ordinal"     
## [36] "scale_colour_viridis_c"    "scale_colour_viridis_d"    "scale_continuous_identity" "scale_discrete_identity"   "scale_discrete_manual"    
## [41] "scale_fill_brewer"         "scale_fill_continuous"     "scale_fill_date"           "scale_fill_datetime"       "scale_fill_discrete"      
## [46] "scale_fill_distiller"      "scale_fill_gradient"       "scale_fill_gradient2"      "scale_fill_gradientn"      "scale_fill_grey"          
## [51] "scale_fill_hue"            "scale_fill_identity"       "scale_fill_manual"         "scale_fill_ordinal"        "scale_fill_viridis_c"     
## [56] "scale_fill_viridis_d"      "scale_linetype"            "scale_linetype_continuous" "scale_linetype_discrete"   "scale_linetype_identity"  
## [61] "scale_linetype_manual"     "scale_radius"              "scale_shape"               "scale_shape_continuous"    "scale_shape_discrete"     
## [66] "scale_shape_identity"      "scale_shape_manual"        "scale_shape_ordinal"       "scale_size"                "scale_size_area"          
## [71] "scale_size_continuous"     "scale_size_date"           "scale_size_datetime"       "scale_size_discrete"       "scale_size_identity"      
## [76] "scale_size_manual"         "scale_size_ordinal"        "scale_type"                "scale_x_continuous"        "scale_x_date"             
## [81] "scale_x_datetime"          "scale_x_discrete"          "scale_x_log10"             "scale_x_reverse"           "scale_x_sqrt"             
## [86] "scale_x_time"              "scale_y_continuous"        "scale_y_date"              "scale_y_datetime"          "scale_y_discrete"         
## [91] "scale_y_log10"             "scale_y_reverse"           "scale_y_sqrt"              "scale_y_time"
```
]

---

# Faceting a Plot

.left-column[
- Data
- .hlb[Aes]thetics
- .hlb[Geom]etrics
- .hlb[Stat]istics
- .hlb[Coord]inates
- .hlb[Scale]s
- **&lt;mark&gt;.hlb[Facet]ing&lt;/mark&gt;**
]
.right-column[
.pull-left[

```r
base_plot +
* facet_wrap(~continent)
```

![](index_files/figure-html/facet1-1.png)&lt;!-- --&gt;
]
.pull-right[

```r
base_plot +
  facet_`grid`(~continent)
```
![](index_files/figure-html/facet_grid-1.png)&lt;!-- --&gt;
]
]

---

# Themes

.left-column[
- Data
- .hlb[Aes]thetics
- .hlb[Geom]etrics
- .hlb[Stat]istics
- .hlb[Coord]inates
- .hlb[Scale]s
- .hlb[Facet]ing
- **&lt;mark&gt;.hlb[Theme]s&lt;/mark&gt;**
]
.right-column[
Apply a general theme for a plot with `theme_...()`. See also [ggthemes](https://jrnold.github.io/ggthemes/reference/index.html).

To set a theme for all following plots, use `theme_set(theme_light())`

.pull-left[

```r
base_plot + 
* theme_light()
```

![](index_files/figure-html/theme1-1.png)&lt;!-- --&gt;

]
.pull-right[

```r
base_plot +
* theme_dark()
```

![](index_files/figure-html/theme2-1.png)&lt;!-- --&gt;
]

Use `theme(...)` for tine-tuning a plot even more.
]

---
class: inverse, center, middle

# Fine-Tuning a Plot
---
# Assign Data

```r
ggplot(gapminder)
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_1-1.png)
]
---
# Mapping Variables to Plot

```r
ggplot(gapminder, `aes(x = gdpPercap, y = lifeExp, size = pop, color = country)`)
```

.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_2-1.png)
]
---
# Adding Point Geometric 

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
* geom_point()
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_3-1.png)
]
---
# Removing the Legend

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() +
* guides(color = FALSE, size = FALSE)
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_4-1.png)
]
---
# Adding Facets

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() + 
  guides(color = FALSE, size = FALSE) +
* facet_wrap(~year)
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_5-1.png)
]
---
# Formatting the x-Axis

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() +
  guides(color = FALSE, size = FALSE) +
  facet_wrap(~year) +
* scale_x_log10(breaks = c(10^3, 10^4, 10^5), labels = c("1k", "10k", "100k"))
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_6-1.png)
]
---
# Formatting the Colors

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() +
  guides(color = FALSE, size = FALSE) +
  facet_wrap(~year) +
  scale_x_log10(breaks = c(10^3, 10^4, 10^5), labels = c("1k", "10k", "100k")) +
* scale_color_manual(values = gapminder::country_colors)
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_7-1.png)
]
---
# Formatting the Size Aesthetic

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() +
  guides(color = FALSE, size = FALSE) +
  facet_wrap(~year) +
  scale_x_log10(breaks = c(10^3, 10^4, 10^5), labels = c("1k", "10k", "100k")) +
  scale_color_manual(values = gapminder::country_colors) + 
* scale_size(range = c(0.5, 12))
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_8-1.png)
]
---
# Formatting the Labels

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() +
  guides(color = FALSE, size = FALSE) +
  facet_wrap(~year) +
  scale_x_log10(breaks = c(10^3, 10^4, 10^5), labels = c("1k", "10k", "100k")) +
  scale_color_manual(values = gapminder::country_colors) +
  scale_size(range = c(0.5, 12)) +
* labs(
*   title = "A Visualisation of the Gapminder Data",
*   subtitle = "Based on Hans Rosling",
*   x = "GDP per capita",
*   y = "Life Expectancy"
* )
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_9-1.png)
]
---
# Formatting the Theme and Font

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() +
  guides(color = FALSE, size = FALSE) +
  facet_wrap(~year) +
  scale_x_log10(breaks = c(10^3, 10^4, 10^5), labels = c("1k", "10k", "100k")) +
  scale_color_manual(values = gapminder::country_colors) +
  scale_size(range = c(0.5, 12)) +
  labs(
    title = "A Visualisation of the Gapminder Data",
    subtitle = "Based on Hans Rosling",
    x = "GDP per capita",
    y = "Life Expectancy"
  ) +
* theme_minimal(base_family = "Fira Sans")
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_10-1.png)
]
---
# Formatting the Panel Elements

```r
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, size = pop, color = country)) +
  geom_point() +
  guides(color = FALSE, size = FALSE) +
  facet_wrap(~year) +
  scale_x_log10(breaks = c(10^3, 10^4, 10^5), labels = c("1k", "10k", "100k")) +
  scale_color_manual(values = gapminder::country_colors) +
  scale_size(range = c(0.5, 12)) +
  labs(
    title = "A Visualisation of the Gapminder Data",
    subtitle = "Based on Hans Rosling",
    x = "GDP per capita",
    y = "Life Expectancy"
  ) +
  theme_minimal(base_family = "Fira Sans") +
* theme(
*   strip.text = element_text(size = 16, face = "bold"),
*   panel.border = element_rect(fill = NA,
*                               color = "grey40"),
*   panel.grid.minor = element_blank()
* )
```
.src2[Based on [gadenbuie gentle-ggplot2](https://pkg.garrickadenbuie.com/gentle-ggplot2)]
.plot-callout[
![](index_files/figure-html/fine_11-1.png)
]
---

# Initial Plot

.center[&lt;img src="index_files/figure-html/fine_4-1.png" width="80%" /&gt;]

---

# Final Plot

.center[&lt;img src="index_files/figure-html/fine_11-1.png" width="80%" /&gt;]

---
class: inverse, center, middle

# Bonus Material

See also: [ggplot2 extensions](http://www.ggplot2-exts.org/gallery/)

---
# Bonus: cowplot
.pull-left[
[cowplot](https://github.com/wilkelab/cowplot) allows us to:

- combine and align multiple plots
- creating inset plots (drawing plots on plots)
- annotate plots with images

See also the [vignettes](https://wilkelab.org/cowplot/articles/index.html) of the package.

.src2[clauswilke &amp; [cowplot](https://github.com/wilkelab/cowplot)]
]
.pull-right[.small[

```r
library(cowplot)
mid &lt;- function(x) mean(range(x))
p1 &lt;- ggplot(mtcars, aes(disp, mpg)) + geom_point()
p2 &lt;- ggplot(mtcars, aes(disp, hp)) + 
* draw_label("Draft", x = mid(mtcars$disp), y = mid(mtcars$hp),
*            color = "#C0A0A0", size = 70, angle = 45) +
  geom_point()

*plot_grid(p1, p2, ncol = 1, align = "v")
```

![](index_files/figure-html/cow-1.png)&lt;!-- --&gt;
]]
---
# Bonus: Repelling Labels
Non-overlapping text and labels using [`ggrepel`](https://github.com/slowkow/ggrepel)

```r
library(ggrepel)
cars &lt;- mtcars %&gt;% rownames_to_column("car") %&gt;% slice(1:20)
```

.pull-left[

```r
ggplot(cars, aes(wt, mpg, label = car)) +
  geom_text() +
  geom_point(color = "red")
```

![](index_files/figure-html/repel_init-1.png)&lt;!-- --&gt;
]
--
.pull-right[

```r
ggplot(cars, aes(wt, mpg, label = car)) +
* geom_text_repel() +
  geom_point(color = "red")
```

![](index_files/figure-html/repel_repel-1.png)&lt;!-- --&gt;
]

.src2[slowkow &amp; [ggrepel](https://github.com/slowkow/ggrepel)]

---
# Bonus: Map

```r
library(sf)
# download and extract data 1stellig.shp.zip
# https://www.suche-postleitzahl.org/downloads 
map &lt;- read_sf("plz-1stellig.shp")
```

```r
ggplot(map) +
* geom_sf(aes(fill = plz)) +
  scale_fill_viridis_d(name = "PLZ") +
  theme_minimal(base_family = "Roboto Condensed") +
  labs(title = "German Postleitzahl (PLZ)",
       caption = "Source: www.suche-postleitzahl.org")
```
.src2[[https://www.suche-postleitzahl.org/downloads](https://www.suche-postleitzahl.org/downloads)]

.plot[
![](index_files/figure-html/map_plot1_plot-1.png)&lt;!-- --&gt;

]

---
# Bonus: Ridge Charts
.pull-left[

```r
library(ggridges)

variables &lt;- c("Month", "Mean Temperature [F]")
linc &lt;- lincoln_weather %&gt;%
  select_at(variables) %&gt;% 
  set_names(c("month", "mean_temp")) %&gt;% 
  mutate(mean_temp = (mean_temp - 32) * 5 / 9)
```
]
.pull-right[

```r
glimpse(linc)
```

```
## Observations: 366
## Variables: 2
## $ month     &lt;fct&gt; January, January, January, Ja…
## $ mean_temp &lt;dbl&gt; -4.4444444, -5.0000000, -5.00…
```
]


```r
ggplot(linc, aes(x = mean_temp, y = month, fill = ..x..)) +
* geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +
  scale_fill_viridis_c() +
  labs(title = "Mean Temperature in Lincoln, NB 2016",
       y = "Month", x = "Mean Temperature °C", fill = "°C") +
  theme_minimal()
```
.src2[Wilke &amp; [ggridges](https://cran.rstudio.com/web/packages/ggridges/vignettes/introduction.html)]
.plot[
![](index_files/figure-html/ridges_plot-1.png)&lt;!-- --&gt;
]

---
# Bonus: Alluvial Charts

.pull-left[

```r
library(ggalluvial)
titanic &lt;- Titanic %&gt;% as_tibble()
```
]
.pull-right[

```r
glimpse(titanic)
```

```
## Observations: 32
## Variables: 5
## $ Class    &lt;chr&gt; "1st", "2nd", "3rd",…
## $ Sex      &lt;chr&gt; "Male", "Male", "Mal…
## $ Age      &lt;chr&gt; "Child", "Child", "C…
## $ Survived &lt;chr&gt; "No", "No", "No", "N…
## $ n        &lt;dbl&gt; 0, 0, 35, 0, 0, 0, 1…
```
]

```r
ggplot(data = titanic, aes(axis1 = Class, axis2 = Sex, axis3 = Age, y = n)) +
* geom_alluvium(aes(fill = Survived)) + # Flows
* geom_stratum() + # Boxes
* geom_text(stat = "stratum", label.strata = TRUE) +
  scale_x_discrete(limits = c("Class", "Sex", "Age"),
                   expand = c(.1, .05)) +
  labs(x = "Demographic", y = "N", title = "Passengers of the Titanic", 
       subtitle = "Stratified by Demographics and Survival") +
  theme_minimal(base_family = "Roboto Condensed") +
  scale_fill_brewer(palette = "Set1")
```
.src2[corybrunson &amp; [ggalluvial](https://github.com/corybrunson/ggalluvial)]
.plot[
![](index_files/figure-html/alluvial_plot_plot-1.png)&lt;!-- --&gt;
]

---
# Bonus: Network Graphs
.pull-left[

```r
library(tidygraph)
library(ggraph)

graph &lt;- as_tbl_graph(highschool) %&gt;% 
    mutate(
      Popularity = centrality_degree(mode = 'in')
    )
```

A graph-object (similar to `igraph`) stores the nodes (i.e., dots) and edges (the connections) separately.

- `tidygraph` is used for manipulating a graph-object, akin to `dplyr`
- `ggraph` is used for visualising the graph, akin to `ggplot2`

See also [this](https://www.data-imaginist.com/2017/ggraph-introduction-layouts/), [this](https://www.data-imaginist.com/2017/ggraph-introduction-nodes/), and [this](https://www.data-imaginist.com/2017/ggraph-introduction-edges/).
]
.pull-right[.small[

```r
graph
```

```
## # A tbl_graph: 70 nodes and 506 edges
## #
## # A directed multigraph with 1 component
## #
## # Node Data: 70 x 2 (active)
##   name  Popularity
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 1              2
## 2 2              0
## 3 3              0
## 4 4              4
## 5 5              5
## 6 6              2
## # … with 64 more rows
## #
## # Edge Data: 506 x 3
##    from    to  year
##   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
## 1     1    13  1957
## 2     1    14  1957
## 3     1    20  1957
## # … with 503 more rows
```
]]

.src2[Pedersen, [tidygraph](https://github.com/thomasp85/tidygraph), &amp; [ggraph](https://github.com/thomasp85/ggraph)]

---
# Bonus: Network Graphs continued

Using `ggraph` to visualise the network

```r
*ggraph(graph, layout = "kk") +
* geom_edge_fan(aes(alpha = stat(index)), show.legend = FALSE) +
* geom_node_point(aes(size = Popularity)) +
  facet_edges(~year) + 
  theme_graph(foreground = "steelblue", fg_text_colour = "white") +
  labs(title = "Highschool Network of Friends")
```

.src2[Pedersen, [tidygraph](https://github.com/thomasp85/tidygraph), &amp; [ggraph](https://github.com/thomasp85/ggraph)]

.plot[
![](index_files/figure-html/network_plot_plot-1.png)&lt;!-- --&gt;
]

---
# Bonus: Waffle Charts
.pull-left[

```r
# devtools::install_github("hrbrmstr/waffle")
library(waffle)

storms &lt;- dplyr::storms %&gt;% 
  filter(year &gt;= 2010) %&gt;% 
  count(year, status)
```
]
.pull-right[

```r
glimpse(storms)
```

```
## Observations: 18
## Variables: 3
## $ year   &lt;dbl&gt; 2010, 2010, 2010, 2011, 2011, 20…
## $ status &lt;chr&gt; "hurricane", "tropical depressio…
## $ n      &lt;int&gt; 138, 71, 193, 79, 41, 203, 122, …
```
]


```r
ggplot(storms, aes(fill = status, values = n)) +
* geom_waffle(color = "white", size = .25, n_rows = 10, flip = TRUE) +
  facet_wrap(~year, nrow = 1, strip.position = "bottom") +
  scale_x_discrete() + 
  scale_fill_brewer(palette = "Set1", name = NULL) +
  coord_equal() +
  labs(title = "Faceted Waffle Bar Chart", 
       subtitle = "{dplyr} storms data", x = "Year", y = "Count") +
  theme_minimal(base_family = "Roboto Condensed") +
  theme(panel.grid = element_blank(), axis.ticks.y = element_line())
```

.src2[hrbrmstr &amp; [waffle](https://github.com/hrbrmstr/waffle)]

.plot[
![](index_files/figure-html/waffe_plot_plot-1.png)&lt;!-- --&gt;
]

---
# Bonus: Statistical Plots
.pull-left[

```r
library(ggstatsplot)
glimpse(movies_long)
```
Warning, `install.packages("ggstatsplot")` might take a while (heavy on dependencies).

See also [ggstatsplot documentation](https://indrajeetpatil.github.io/ggstatsplot/)
]
.pull-right[
.small[

```
## Observations: 1,579
## Variables: 8
## $ title  &lt;chr&gt; "Shawshank Redemption, The", "Lord of the Rings: The Retu…
## $ year   &lt;int&gt; 1994, 2003, 2001, 2002, 1994, 1993, 1977, 1980, 1968, 200…
## $ length &lt;int&gt; 142, 251, 208, 223, 168, 195, 125, 129, 158, 135, 93, 113…
## $ budget &lt;dbl&gt; 25.0, 94.0, 93.0, 94.0, 8.0, 25.0, 11.0, 18.0, 5.0, 3.3, …
## $ rating &lt;dbl&gt; 9.1, 9.0, 8.8, 8.8, 8.8, 8.8, 8.8, 8.8, 8.7, 8.7, 8.7, 8.…
## $ votes  &lt;int&gt; 149494, 103631, 157608, 114797, 132745, 97667, 134640, 10…
## $ mpaa   &lt;fct&gt; R, PG-13, PG-13, PG-13, R, R, PG, PG, PG-13, R, PG, R, R,…
## $ genre  &lt;fct&gt; Drama, Action, Action, Action, Drama, Drama, Action, Acti…
```
]
]

&lt;div&gt;
.pull-left[

```r
ggbetweenstats(
  data = movies_long,
  x = mpaa,
  y = rating,
  pairwise.comparisons = TRUE,
  pairwise.display = "s",
  messages = FALSE
)
```
]
.pull-left[
![](index_files/figure-html/statplot_plot_out-1.png)&lt;!-- --&gt;
]
&lt;/div&gt;

---

# Bonus: Animation

.small[

```r
library(gifski)
library(gganimate)

plot &lt;- ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
  geom_point(alpha = 0.7, show.legend = FALSE) +
  scale_colour_manual(values = country_colors) +
  scale_size(range = c(2, 12)) +
  scale_x_log10() +
  facet_wrap(~continent) +
  labs(x = "GDP per capita", y = "Life Expectancy") +
  theme_light()
```
]

.src2[Pedersen &amp; [gganimate](https://github.com/thomasp85/gganimate)]

.pull-left[.small[

```r
plot
```

![](index_files/figure-html/anim_static-1.png)&lt;!-- --&gt;
]]
--
.pull-right[.small[

```r
plot +
  labs(title = "Year: {frame_time}") +
* transition_time(year) +
* ease_aes("linear")
```
]]
--
.plotleft[
![](index_files/figure-html/anim_plotleft-1.gif)&lt;!-- --&gt;
]

---
class: inverse, middle, center

# Thanks for listening!

---

# Exercises

Throughout all exercises, make sure to label the axis and other elements properly.

Also use colors where needed to highlight certain aspects.

1. Use the `mtcars` dataset and explore the relation of `mpg` (miles per gallon), `hp` (horsepower) and `cyl` (cylinders), look at `geom_smooth()`. 
2. Use `starwars` to look at the distribution of species using `geom_box()` and `geom_col()`.
3. Use the `gapminders` dataset and look at the histogram and densities of different continents over different years, try also `geom_boxplot()`.
4. Use the `reshape::tips` dataset to look at the effects of the gender and weekdays on tipping using facets. 
5. Recreate the following plot using `babynames::babynames`:

.pull-left[
.center[&lt;img src="figures/genben-plot-out-1.png" width="80%" /&gt;]
]
.pull-right[
.src2[[gadenbuie](https://pkg.garrickadenbuie.com/trug-ggplot2/index_files/figure-html/genben-plot-out-1.png)]
]

---

# Exercises Advanced

Pick and explore one of the following datasets using the skills you learned today:

If you have a github account, use `reprex` and github gists to share the code and results with us!

- Panel: `gapminder::gapminder`, `dplyr::storms`
- Map / Spatial: `ggmap::crime`, `dplyr::storms`, `nycflights13::flights` (you can also try the `leaflet` package)
- Longitudinal: `babynames::babynames`, `nycflights13::flights`
- Network: `ggraph::whigs`, `ggraph::highschool`
- Dataset collection: https://github.com/rfordatascience/tidytuesday

Create your own "corporate" colors that you can apply to your charts [(starter)](i.e., https://drsimonj.svbtle.com/creating-corporate-colour-palettes-for-ggplot2).

Look at the [extensions gallery](http://www.ggplot2-exts.org/gallery/) use and experiment with some extensions

---

# Further Resources

Learn More

- Documentation: http://ggplot2.tidyverse.org/
- R for Data Science: http://r4ds.had.co.nz/data-visualisation.html
- ggplot CheatSheet https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf

Other ggplot2 workshops:

- Garrick Aden-Buie: https://pkg.garrickadenbuie.com/gentle-ggplot2/
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
